<!DOCTYPE html>
<html lang="zh-tw">
 	<head>
    	<meta charset="utf-8">
    	<meta http-equiv="X-UA-Compatible" content="IE=edge">
    	<meta name="viewport" content="width=device-width, initial-scale=1">
    	<meta name="description" content="">
    	<meta name="author" content="">
	    <!-- 
	    <link rel="shortcut icon" href="../../assets/ico/favicon.ico">
		-->

    	<title>Japanese Words Memorization Helper</title>

	    <!-- Bootstrap core CSS -->
    	<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
    	<!-- Bootstrap theme -->
    	<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">

    	<!-- Custom styles for this template -->
    	<link href="theme.css" rel="stylesheet">

    	<!-- Just for debugging purposes. Don't actually copy this line! -->
    	<!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->

    	<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    	<!--[if lt IE 9]>
      		<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      		<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    	<![endif]-->
  	</head>

<body role="document">

	<!-- Fixed navbar -->
	<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
		<div class="container">
	    	<div class="navbar-header">
	      		<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
	        	<span class="sr-only">Toggle navigation</span>
	        	<span class="icon-bar"></span>
	        	<span class="icon-bar"></span>
	        	<span class="icon-bar"></span>
	      		</button>
	      		<a class="navbar-brand" href="#">Bootstrap theme</a>
	    	</div>
		    <div class="navbar-collapse collapse">
		    	<ul class="nav navbar-nav">
			        <li class="active"><a href="#">Home</a></li>
			        <li><a href="#about">About</a></li>
			        <li><a href="#contact">Contact</a></li>
			        <li class="dropdown">
		            	<a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
		            	<ul class="dropdown-menu">
				            <li><a href="#">Action</a></li>
				            <li><a href="#">Another action</a></li>
				            <li><a href="#">Something else here</a></li>
				            <li class="divider"></li>
				            <li class="dropdown-header">Nav header</li>
				            <li><a href="#">Separated link</a></li>
				            <li><a href="#">One more separated link</a></li>
		          		</ul>
		        	</li>
		      </ul>
		    </div><!--/.nav-collapse -->
	  	</div>
	</div>

<script>
xmlhttp = new XMLHttpRequest();
xmlhttp.open("GET", "words.xml", false);
xmlhttp.send();
xmlDoc = xmlhttp.responseXML;

var wordCollectionAll = new Array();

var words = new Array();

var iter;

var txtQuestion;

var txtAnswer;

var txtListAll;

document.getElementById("divLoadSuccess").style.display = "none";

function checkAll(field)
{
	for (i = 0; i < field.length; i++)
	{
		field[i].checked = true;
	}
}

function uncheckAll(field)
{
	for (i = 0; i < field.length; i++)
	{
		field[i].checked = false;
	}
}

function loadXML(field)
{
	wordCollectionAll.length = 0;
	words.length = 0;

	var noOptionChecked = true; 
	for (i = 0; i < field.length; i++)
	{
		if (field[i].checked)
		{
			noOptionChecked = false;
		}
	}

	if (noOptionChecked)
	{
		document.getElementById("divLoadSuccess").style.display = "none";
		document.getElementById("divLoadFail").style.display = "none";
		//document.getElementById("divLoadFail").style.display = "block";
		$("#divLoadFail").fadeIn("slow").css("display","inline-block");
	}
	else
	{
		if (document.getElementById("cb_L7").checked)
		{
			var wordL7 = Array.prototype.slice.call(xmlDoc.querySelectorAll('L7 word'));
			wordCollectionAll = wordCollectionAll.concat(wordL7);
		}
		if (document.getElementById("cb_L8").checked)
		{
			var wordL8 = Array.prototype.slice.call(xmlDoc.querySelectorAll('L8 word'));
			wordCollectionAll = wordCollectionAll.concat(wordL8);
		}
		if (document.getElementById("cb_L9").checked)
		{
			var wordL9 = Array.prototype.slice.call(xmlDoc.querySelectorAll('L9 word'));
			wordCollectionAll = wordCollectionAll.concat(wordL9);
		}
		if (document.getElementById("cb_L10").checked)
		{
			var wordL10 = Array.prototype.slice.call(xmlDoc.querySelectorAll('L10 word'));
			wordCollectionAll = wordCollectionAll.concat(wordL10);
		}
		if (document.getElementById("cb_L11").checked)
		{
			var wordL11 = Array.prototype.slice.call(xmlDoc.querySelectorAll('L11 word'));
			wordCollectionAll = wordCollectionAll.concat(wordL11);
		}

		iter = wordCollectionAll.length;

		for (i = 0; i < wordCollectionAll.length; i++)
		{
			words[i] = new Array(5);
		}

		for (i = 0; i < wordCollectionAll.length; i++)
		{
			words[i][0] = wordCollectionAll[i].getElementsByTagName("chinese")[0].childNodes[0].nodeValue;
			words[i][1] = wordCollectionAll[i].getElementsByTagName("hiragana")[0].childNodes[0].nodeValue;
			words[i][2] = wordCollectionAll[i].getElementsByTagName("kanji")[0].childNodes[0].nodeValue;
			words[i][3] = wordCollectionAll[i].getElementsByTagName("katakana")[0].childNodes[0].nodeValue;
			words[i][4] = wordCollectionAll[i].getElementsByTagName("option")[0].childNodes[0].nodeValue;
		}

		document.getElementById("divLoadFail").style.display = "none";
		document.getElementById("divLoadSuccess").style.display = "none";
		//$("#divLoadFail").fadeOut("slow");
		//document.getElementById("divLoadSuccess").style.display = "block";
		$("#divLoadSuccess").fadeIn("slow").css("display","inline-block");
	}
}

var rn;

function nextWord()
{
	document.getElementById("divAnswer").style.visibility = "hidden";
	//document.getElementById("divLoadSuccess").style.display = "none";
	$("#divLoadSuccess").fadeOut("slow");

	if (iter == 0)
	{
		iter = wordCollectionAll.length;	
	}

	txtQuestion = "";	
	rn = Math.floor(Math.random() * iter);
	txtQuestion += words[rn][0];

	document.getElementById("divQuestion").innerHTML = txtQuestion;

	var tempArray = new Array(5);
	for (i = 0; i < 5; i++)
	{
		tempArray[i] = words[rn][i];
		words[rn][i] = words[iter - 1][i];
		words[iter - 1][i] = tempArray[i];
	}

	iter--;

	if (iter == 0)
	{
		document.getElementById("nextButton").value = "Restart (RightArrow)";
		alert("Last Word");
	}
	else
	{
		document.getElementById("nextButton").value = "Next Word (RightArrow)";
	}
}

function answer()
{
	txtAnswer = "";
	txtAnswer += "<table class = 'table table-bordered table-hover table-striped'>";
	txtAnswer += "<thead><tr><th>平假名</th><th>漢字</th><th>片假名</th><th>其他</th></tr></thead>";
	txtAnswer += "<tbody><tr><td>";
	txtAnswer += words[iter][1];
	txtAnswer += "</td><td>";
	txtAnswer += words[iter][2];
	txtAnswer += "</td><td>";
	txtAnswer += words[iter][3];
	txtAnswer += "</td><td>";
	txtAnswer += words[iter][4];
	txtAnswer += "</td></tr></tbody>";

	txtAnswer += "</table>";

	document.getElementById("divAnswer").innerHTML = txtAnswer;
	document.getElementById("divAnswer").style.visibility = "visible";
}

function listAll()
{
	txtListAll = "";
	txtListAll += "<table class='table table-bordered table-hover table-striped'>";
	txtListAll += "<thead><tr><th>中文</th><th>hiragana</th><th>kanji</th><th>katakana</th><th>option</th></th></thead>";

	txtListAll += "<tbody>"
	for (i = 0; i < wordCollectionAll.length; i++)
	{
		txtListAll += "<tr><td>";
		txtListAll += wordCollectionAll[i].getElementsByTagName("chinese")[0].childNodes[0].nodeValue;
		txtListAll += "</td><td>";
		txtListAll += wordCollectionAll[i].getElementsByTagName("hiragana")[0].childNodes[0].nodeValue;
		txtListAll += "</td><td>";
		txtListAll += wordCollectionAll[i].getElementsByTagName("kanji")[0].childNodes[0].nodeValue;
		txtListAll += "</td><td>";
		txtListAll += wordCollectionAll[i].getElementsByTagName("katakana")[0].childNodes[0].nodeValue;
		txtListAll += "</td><td>";
		txtListAll += wordCollectionAll[i].getElementsByTagName("option")[0].childNodes[0].nodeValue;
		txtListAll += "</td></tr>";
	}

	txtListAll += "</tbody>"
	txtListAll += "</table>";

	document.getElementById("divListWord").innerHTML = txtListAll;
	document.getElementById("divListWord").style.visibility = "visible";
	document.getElementById("divListWord").style.display = "inline";
}

function closeList()
{
	document.getElementById("divListWord").style.display = "none";
}


document.onkeydown = function(event)
{
	var e = event || window.event;
	//alert(e.keyCode);
	if (e && (e.keyCode == '39'))
	{
		nextWord();
	}
	if (e && (e.keyCode == '40'))
	{
		answer();
	}
}


</script>

    <div class="container theme-showcase" role="main">

    	<!-- Main jumbotron for a primary marketing message or call to action -->
      	<div class="jumbotron">
        	<h1>Hello, world!</h1>
        	<p>This is a template for a simple marketing or informational website. It includes a large callout called a jumbotron and three supporting pieces of content. Use it as a starting point to create something more unique.</p>
        	<p><a href="#" class="btn btn-primary btn-lg" role="button">Learn more &raquo;</a></p>
      	</div>

      	<div class="page-header">
      		<h3>Choose the Lessons You Want to Practice</h3>
      	</div>

      	<div>
      		<p>
				<input type="button" value="Check All" class="btn btn-default" onclick="checkAll(document.formCheckbox.check)"></input>
				<input type="button" value="Uncheck All" class="btn btn-default" onclick="uncheckAll(document.formCheckbox.check)"></input>
	  		</p>
		</div>
		
		<form name="formCheckbox">
			<div>
				<label class="checkbox-inline">
					<input type="checkbox" id="cb_L7" name="check" value="L7">L7</input>
				</label>
				<label class="checkbox-inline">
					<input type="checkbox" id="cb_L8" name="check" value="L8">L8</input>
				</label>
				<label class="checkbox-inline">
					<input type="checkbox" id="cb_L9" name="check" value="L9">L9</input>
				</label>
				<label class="checkbox-inline">
					<input type="checkbox" id="cb_L10" name="check" value="L10">L10</input>
				</label>
				<label class="checkbox-inline">
					<input type="checkbox" id="cb_L11" name="check" value="L11">L11(~No.34)</input><br>
				</label>	
			</div>
		</form>

		<div>
			<input type="button" value="Load" class="btn btn-primary" onclick="loadXML(document.formCheckbox.check)"></input>
	  	</div>

		<p>
			<div id="divLoadSuccess" style="display:none" class="alert alert-success">
        		<strong>Loading Complete!</strong> Now you can press the "Next Word" button.
			</div>
			<div id="divLoadFail" style="display:none" class="alert alert-danger">
        		<strong>Loading Failed!</strong> Please select at least one item.
			</div>
		</p>

      	<div class="page-header">
      		<h3>Press the "Next Word" Button to Show Words Randomly</h3>
      	</div>

	  	<p>	
			<div id="divQuestion" class="lead"></div>
	  	</p>

		<p>
			<div id="divAnswer"></div>
		</p>

	  	<p>	
			<input type="button" id="nextButton" value="Next Word (RightArrow)" class="btn btn-primary" onclick="nextWord()"></input>
			<input type="button" id="showAnswer" value="Show Answer (DownArrow)" class="btn btn-success" onclick="answer()"></input>
	  	</p>

      	<div class="page-header">
      		<h3>Press the "List All Words" Button to Show All Loaded Words</h3>
      	</div>
	  	
	  	<p>
			<input type="button" id="listAll" value="List All Words" class="btn btn-primary" onclick="listAll()"></input>
			<input type="button" id="closeList" value="Close List" class="btn btn-primary" onclick="closeList()"></input>
	  	</p>
		
		<br>
		
		<div id="divListWord"></div>

	  	<div class="page-header">
        	<h3>About</h3>
      	</div>
      	
      	<div class="well">
			<footer>
				<address>
  					<strong>Edited by:</strong><br>
  					kyletso
				</address>
				<address>
  					<strong>Contact information:</strong><br>
  					<a href="mailto:#">kyletso@gmail.com</a>
				</address>
			</footer>
	  	</div>

    </div> <!-- /container -->

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
    <!--
    <script src="../../assets/js/docs.min.js"></script>
	-->
</body>

</html>
